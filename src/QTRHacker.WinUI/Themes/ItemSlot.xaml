<?xml version="1.0" encoding="utf-8"?>
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:QTRHacker"
    xmlns:controls="using:QTRHacker.Controls"
    xmlns:converters="using:QTRHacker.Converters"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:ic="using:Microsoft.Xaml.Interactions.Core"
    >

    <ControlTemplate x:Key="ItemSlotTemplate" TargetType="controls:ItemSlot">
        <Border Padding="0" Background="{TemplateBinding Background}" HorizontalAlignment="Center" VerticalAlignment="Center"
                Width="{TemplateBinding Width}" Height="{TemplateBinding Height}" CornerRadius="{TemplateBinding CornerRadius}">
            <Grid>
                <Grid.Resources>
                    <converters:ItemStackToHintConverter x:Key="ItemStackToHintConverter"/>
                </Grid.Resources>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Border x:Name="PART_MaskBorder" BorderThickness="0" Background="{ThemeResource AccentControlElevationBorderBrush}" Visibility="Collapsed" Grid.RowSpan="2"
                        CornerRadius="{TemplateBinding CornerRadius}"/>
                <Grid Margin="10" Grid.RowSpan="2">
                    <Image x:Name="PART_ItemImage" Stretch="Uniform" Source="{TemplateBinding ItemImageSource}"/>
                </Grid>
                <TextBlock x:Name="PART_ItemStackBlock" Margin="4,0,0,2" FontSize="12" Foreground="{ThemeResource TextFillColorPrimary}"
                           Text="{Binding ItemStack, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={ThemeResource ItemStackToHintConverter}}"
                           Grid.Row="1"/>
                <Border x:Name="PART_Border" BorderBrush="{TemplateBinding FocusVisualPrimaryBrush}" Grid.RowSpan="2"
                        CornerRadius="{TemplateBinding CornerRadius}"/>
            </Grid>
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal">
                        <VisualState.Setters>
                            <Setter Target="PART_MaskBorder.Visibility" Value="Collapsed"/>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="PointerOver">
                        <VisualState.Setters>
                            <Setter Target="PART_MaskBorder.Visibility" Value="Visible"/>
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
                <VisualStateGroup x:Name="CheckStates">
                    <VisualState x:Name="Checked">
                        <VisualState.Setters>
                            <Setter Target="PART_Border.BorderThickness" Value="2"/>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="Unchecked">
                        <VisualState.Setters>
                            <Setter Target="PART_Border.BorderThickness" Value="0"/>
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
                <VisualStateGroup x:Name="StackStates">
                    <VisualState x:Name="StackVisible">
                        <VisualState.Setters>
                            <Setter Target="PART_ItemStackBlock.Visibility" Value="Visible"/>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="StackInvisible">
                        <VisualState.Setters>
                            <Setter Target="PART_ItemStackBlock.Visibility" Value="Collapsed"/>
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
        </Border>
    </ControlTemplate>
    <Style TargetType="controls:ItemSlot">
        <Setter Property="Template" Value="{StaticResource ItemSlotTemplate}"/>
        <Setter Property="CornerRadius" Value="2"/>
        <Setter Property="Padding" Value="2"/>
        <Setter Property="Width" Value="48"/>
        <Setter Property="Height" Value="48"/>
        <Setter Property="Background" Value="{ThemeResource ControlElevationBorderBrush}"/>
        <Setter Property="AllowFocusOnInteraction" Value="False"/>
        <Setter Property="IsTabStop" Value="False"/>
        <Setter Property="FocusVisualPrimaryBrush" Value="{ThemeResource SystemControlHighlightAccentBrush}"/>
    </Style>
</ResourceDictionary>
